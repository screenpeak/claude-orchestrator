# Test Generation Prompt Template
# Copy and customize the relevant section for your delegation

# -----------------------------------------------------------------------------
# TEMPLATE: Unit Tests for Specific Files
# -----------------------------------------------------------------------------
Generate unit tests for: {{FILES}}

Requirements:
1. Detect and use the existing test framework
2. Match test file naming conventions from the codebase
3. Cover: happy path, edge cases, error cases
4. Use descriptive test names
5. Run tests and report pass/fail

Return: files created, test count, coverage delta, any untestable code

# -----------------------------------------------------------------------------
# TEMPLATE: Tests for New Feature
# -----------------------------------------------------------------------------
Add tests for the new feature in: {{FILE}}

Feature context: {{DESCRIPTION}}

Expected behavior:
- {{BEHAVIOR_1}}
- {{BEHAVIOR_2}}
- {{BEHAVIOR_3}}

Generate tests covering each behavior and its failure modes.
Use existing mocks in __mocks__/ or tests/fixtures/ if available.
Run: {{TEST_COMMAND}}

# -----------------------------------------------------------------------------
# TEMPLATE: Coverage Improvement
# -----------------------------------------------------------------------------
Improve test coverage for: {{DIRECTORY}}

Steps:
1. Run coverage report
2. Identify files below {{THRESHOLD}}% coverage
3. Add tests for uncovered branches
4. Re-run and report improvement

Constraints:
- Don't modify source files
- Match existing patterns
- Focus on uncovered branches, not redundant tests

Return: before/after coverage, tests added per file

# -----------------------------------------------------------------------------
# TEMPLATE: Integration Tests
# -----------------------------------------------------------------------------
Generate integration tests for API endpoints in: {{DIRECTORY}}

Test each endpoint for:
- Success responses
- Authentication (valid/invalid/missing token)
- Validation (missing/invalid fields)
- Error responses (404, 400, 401, 500)

Run: {{TEST_COMMAND}}
Return: endpoints tested, test count, setup requirements

# -----------------------------------------------------------------------------
# TEMPLATE: Regression Test from Bug
# -----------------------------------------------------------------------------
Create a regression test for: {{BUG_DESCRIPTION}}

Steps:
1. Write a failing test that reproduces the bug
2. Verify the test fails with current code
3. DO NOT fix the bug — just create the test

The test should:
- Be named: test_{{BUG_ID}}_regression or similar
- Document the bug in the test description
- Fail clearly with the expected vs actual behavior

Return: test file, test name, failure output

# -----------------------------------------------------------------------------
# STANDARD RETURN FORMAT
# -----------------------------------------------------------------------------
## Summary
[1-2 sentences describing what was done]

## Files Created/Modified
- path/to/test.ts (new)
- path/to/other.test.ts (modified)

## Tests Added
- functionName: N tests (description of cases)

## Test Results
✓ [test command]
N tests passed, M failed

## Coverage (if available)
file.ts: X% → Y% (+Z%)

## Notes
- [Any untestable code and why]
- [Any issues discovered]

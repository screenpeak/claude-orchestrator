# Refactoring Prompt Template
# Copy and customize the relevant section for your delegation

# -----------------------------------------------------------------------------
# TEMPLATE: Rename Across Codebase
# -----------------------------------------------------------------------------
Rename '{{OLD_NAME}}' to '{{NEW_NAME}}' everywhere in the codebase.

Include:
- Class/function/variable definitions
- All imports and exports
- All usage sites
- Test files
- Type definitions
- Comments and documentation

Run: {{TEST_COMMAND}}

Report: files changed, occurrences updated, test results.

# -----------------------------------------------------------------------------
# TEMPLATE: Extract Function/Module
# -----------------------------------------------------------------------------
Extract: {{DESCRIPTION_OF_CODE}}
From: {{SOURCE_FILE}}
To: {{TARGET_FILE}}

Steps:
1. Create the new file with the extracted code
2. Add proper exports
3. Update the source file to import from the new location
4. Update any other files that reference the extracted code
5. Run tests

Constraints:
- Preserve all existing behavior
- Maintain type safety
- Don't change public API

# -----------------------------------------------------------------------------
# TEMPLATE: Change Function Signature
# -----------------------------------------------------------------------------
Change the signature of '{{FUNCTION_NAME}}':

From: {{OLD_SIGNATURE}}
To:   {{NEW_SIGNATURE}}

Steps:
1. Update the function definition
2. Update all call sites
3. Update tests
4. Run tests

For call sites, convert:
  {{OLD_CALL_EXAMPLE}} → {{NEW_CALL_EXAMPLE}}

# -----------------------------------------------------------------------------
# TEMPLATE: Migrate Pattern
# -----------------------------------------------------------------------------
Migrate {{OLD_PATTERN}} to {{NEW_PATTERN}} in {{DIRECTORY}}

Example conversion:
FROM:
{{OLD_CODE_EXAMPLE}}

TO:
{{NEW_CODE_EXAMPLE}}

Steps:
1. Convert each occurrence
2. Update callers as needed
3. Run tests after each file

Skip: {{SKIP_CONDITIONS}}

# -----------------------------------------------------------------------------
# TEMPLATE: Consolidate Duplicates
# -----------------------------------------------------------------------------
Find and consolidate duplicate code in: {{DIRECTORY}}

Steps:
1. Identify functions/blocks that are duplicated or near-duplicated
2. Create shared utilities in {{UTILITY_LOCATION}}
3. Replace duplicates with calls to shared utilities
4. Run tests

Constraints:
- Only consolidate true duplicates (same logic)
- Preserve all existing behavior
- Document new utilities

Report: duplicates found, utilities created, files updated

# -----------------------------------------------------------------------------
# TEMPLATE: File/Directory Restructure
# -----------------------------------------------------------------------------
Restructure {{DIRECTORY}}:

Current structure:
{{CURRENT_STRUCTURE}}

Target structure:
{{TARGET_STRUCTURE}}

Steps:
1. Create new directories
2. Move files to new locations
3. Update all imports throughout the codebase
4. Update barrel exports (index.ts/index.js)
5. Run tests

# -----------------------------------------------------------------------------
# STANDARD RETURN FORMAT
# -----------------------------------------------------------------------------
## Summary
[Brief description of what was done]

## Files Modified
- path/to/file.ts (type of change) - details

## Changes
- N files renamed
- N files modified
- N references updated

## Test Results
✓ [test command]
N tests passed, M failed

## Notes
- [Any edge cases or items needing human review]
